<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Messenger Bot Launcher</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
  h2 { color: #333; }
  form { background: #fff; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);}
  input, button { padding: 10px; margin: 5px 0; width: 100%; }
  button { background: #4CAF50; color: #fff; border: none; cursor: pointer; }
  button:hover { background: #45a049; }
  p { font-weight: bold; }
</style>
</head>
<body>
  <h2>Messenger Bot Launcher</h2>

  <form method="POST" enctype="multipart/form-data" action="/start">
    <label>Upload AppState JSON:</label><br/>
    <input type="file" name="appstate" required /><br/><br/>

    <label>Owner UID:</label><br/>
    <input type="text" name="owner" required /><br/><br/>

    <button type="submit">Start Bot</button>
  </form>

  <form method="POST" action="/stop">
    <button type="submit">Stop Bot</button>
  </form>

  <p>Status: <span id="status">Loading...</span></p>

  <script>
    async function updateStatus() {
      try {
        const res = await fetch('/status');
        const data = await res.json();
        document.getElementById('status').textContent = data.running ? "Running ✅" : "Stopped ❌";
      } catch(e) {
        document.getElementById('status').textContent = "Error ❌";
      }
    }
    updateStatus();
    setInterval(updateStatus, 5000);
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jerry Bot Hacker Console</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: monospace;
      background: #000;
      color: #00ff00;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    /* Background Layers */
    #glowing-grid, #particle-network {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -2;
    }
    #particle-network {
      z-index: -1;
    }

    /* Console Box */
    .console {
      background: rgba(0, 20, 0, 0.9);
      border: 2px solid #00ff00;
      width: 600px;
      height: 500px;
      border-radius: 10px;
      box-shadow: 0 0 20px #00ff00;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .header {
      padding: 10px;
      background: rgba(0, 40, 0, 0.95);
      border-bottom: 1px solid #00ff00;
      text-align: center;
      font-weight: bold;
      color: #0f0;
      letter-spacing: 2px;
    }

    form {
      padding: 10px;
      border-bottom: 1px solid #00ff00;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    input, button {
      background: #000;
      border: 1px solid #00ff00;
      color: #0f0;
      padding: 6px;
      border-radius: 5px;
      font-family: monospace;
    }

    input[type="file"] {
      padding: 3px;
    }

    button {
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #00ff00;
      color: #000;
    }

    .logs {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      font-size: 13px;
      line-height: 1.4;
      scrollbar-width: thin;
      scrollbar-color: #00ff00 #000;
    }

    .logs::-webkit-scrollbar {
      width: 6px;
    }
    .logs::-webkit-scrollbar-thumb {
      background: #00ff00;
    }
  </style>
</head>
<body>
  <!-- Glowing Grid Background -->
  <canvas id="glowing-grid"></canvas>

  <!-- Particle Network Background -->
  <canvas id="particle-network"></canvas>

  <!-- Hacker Console -->
  <div class="console">
    <div class="header">[ Jerry Bot Hacker Console ]</div>

    <form id="startForm">
      <input type="file" name="appstate" required>
      <input type="text" name="owner" placeholder="Owner UID" required>
      <button type="submit">Start Bot</button>
    </form>

    <button id="stopBtn">Stop Bot</button>

    <div class="logs" id="logs"></div>
  </div>

  <script>
    // === Glowing Grid ===
    const gridCanvas = document.getElementById("glowing-grid");
    const gctx = gridCanvas.getContext("2d");
    function resizeGrid() {
      gridCanvas.width = window.innerWidth;
      gridCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeGrid);
    resizeGrid();

    function drawGrid() {
      gctx.clearRect(0, 0, gridCanvas.width, gridCanvas.height);
      gctx.strokeStyle = "rgba(0,255,0,0.2)";
      gctx.lineWidth = 1;

      const spacing = 40;
      for (let x = 0; x < gridCanvas.width; x += spacing) {
        gctx.beginPath();
        gctx.moveTo(x, 0);
        gctx.lineTo(x, gridCanvas.height);
        gctx.stroke();
      }
      for (let y = 0; y < gridCanvas.height; y += spacing) {
        gctx.beginPath();
        gctx.moveTo(0, y);
        gctx.lineTo(gridCanvas.width, y);
        gctx.stroke();
      }
    }
    setInterval(drawGrid, 100);

    // === Particle Network ===
    const pCanvas = document.getElementById("particle-network");
    const pctx = pCanvas.getContext("2d");
    function resizeParticles() {
      pCanvas.width = window.innerWidth;
      pCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeParticles);
    resizeParticles();

    let particles = [];
    for (let i = 0; i < 80; i++) {
      particles.push({
        x: Math.random() * pCanvas.width,
        y: Math.random() * pCanvas.height,
        vx: (Math.random() - 0.5) * 0.6,
        vy: (Math.random() - 0.5) * 0.6
      });
    }

    function animateParticles() {
      pctx.clearRect(0, 0, pCanvas.width, pCanvas.height);
      for (let p of particles) {
        p.x += p.vx;
        p.y += p.vy;

        if (p.x < 0 || p.x > pCanvas.width) p.vx *= -1;
        if (p.y < 0 || p.y > pCanvas.height) p.vy *= -1;

        pctx.beginPath();
        pctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
        pctx.fillStyle = "#00ff00";
        pctx.fill();
      }

      for (let i = 0; i < particles.length; i++) {
        for (let j = i + 1; j < particles.length; j++) {
          let dx = particles[i].x - particles[j].x;
          let dy = particles[i].y - particles[j].y;
          let dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < 120) {
            pctx.beginPath();
            pctx.moveTo(particles[i].x, particles[i].y);
            pctx.lineTo(particles[j].x, particles[j].y);
            pctx.strokeStyle = "rgba(0,255,0,0.2)";
            pctx.stroke();
          }
        }
      }
      requestAnimationFrame(animateParticles);
    }
    animateParticles();

    // === Logs Panel ===
    const logs = document.getElementById('logs');
    function addLog(msg, type="info") {
      const line = document.createElement('div');
      line.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
      if (type === "error") line.style.color = "#ff4444";
      if (type === "success") line.style.color = "#00ff00";
      logs.appendChild(line);
      logs.scrollTop = logs.scrollHeight;
    }

    // === API Functions ===
    async function checkStatus() {
      try {
        const res = await fetch("/status");
        const data = await res.json();
        addLog(`Status: ${data.running ? "Running ‚úÖ" : "Stopped üõë"}`);
      } catch {
        addLog("Status check failed ‚ùå", "error");
      }
    }
    setInterval(checkStatus, 5000);
    checkStatus();

    document.getElementById("startForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      addLog("Starting bot...");
      try {
        const res = await fetch("/start", { method: "POST", body: formData });
        const data = await res.json();
        addLog(data.message, "success");
        checkStatus();
      } catch {
        addLog("Start failed ‚ùå", "error");
      }
    });

    document.getElementById("stopBtn").addEventListener("click", async () => {
      addLog("Stopping bot...");
      try {
        const res = await fetch("/stop", { method: "POST" });
        const data = await res.json();
        addLog(data.message, "success");
        checkStatus();
      } catch {
        addLog("Stop failed ‚ùå", "error");
      }
    });
  </script>
</body>
</html>
